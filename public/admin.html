<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="DELICUTE Admin Dashboard for restaurant management">
  <title>DELICUTE - Admin Dashboard</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.min.js" defer></script>
  <script src="https://cdn.jsdelivr.net/npm/vanilla-tilt@1.7.0/dist/vanilla-tilt.min.js" defer></script>
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js" defer></script>
  <script src="https://cdn.socket.io/4.5.0/socket.io.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary: #ff6b00;
      --secondary: #ff8f33;
      --background: #fef3e7;
      --glass-bg: rgba(255, 255, 255, 0.95);
      --shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      --accent: #34d399;
      --text-dark: #1a202c;
      --text-light: #ffffff;
    }

    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
    @keyframes dropdown { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }

    body {
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(135deg, var(--background), #f8e7d4);
      color: var(--text-dark);
      margin: 0;
      overscroll-behavior: none;
      -webkit-tap-highlight-color: transparent;
    }

    .glass {
      background: var(--glass-bg);
      backdrop-filter: blur(12px);
      border: 1px solid rgba(255, 255, 255, 0.4);
      box-shadow: var(--shadow);
      border-radius: 16px;
      transition: all 0.3s ease;
    }

    .glass:hover {
      transform: translateY(-5px);
      box-shadow: 0 15px 50px rgba(0, 0, 0, 0.2);
    }

    .stunning-btn {
      background: linear-gradient(45deg, var(--primary), var(--secondary));
      color: var(--text-light);
      padding: 12px 24px;
      border-radius: 12px;
      font-weight: 600;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }

    .stunning-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 20px rgba(255, 107, 0, 0.4);
    }

    .dropdown-menu {
      background: var(--glass-bg);
      backdrop-filter: blur(12px);
      border-radius: 12px;
      box-shadow: var(--shadow);
      position: absolute;
      top: 60px;
      right: 20px;
      width: 220px;
      z-index: 1000;
      opacity: 0;
      visibility: hidden;
      transform: translateY(-10px);
      transition: all 0.3s ease;
    }

    .dropdown-menu.show {
      opacity: 1;
      visibility: visible;
      transform: translateY(0);
      animation: dropdown 0.3s ease-out;
    }

    .dropdown-menu button {
      width: 100%;
      text-align: left;
      padding: 12px 16px;
      color: var(--text-dark);
      font-weight: 500;
      display: flex;
      align-items: center;
      gap: 12px;
      transition: all 0.3s ease;
    }

    .dropdown-menu button:hover {
      background: var(--primary);
      color: var(--text-light);
    }

    .table-container {
      overflow-x: auto;
      max-height: 500px;
      background: #ffffff;
      border-radius: 16px;
      scrollbar-width: thin;
      scrollbar-color: var(--primary) #e5e7eb;
    }

    table {
      width: 100%;
      border-collapse: separate;
      border-spacing: 0;
    }

    th, td {
      padding: 14px;
      text-align: left;
      font-size: 0.9rem;
    }

    th {
      background: linear-gradient(45deg, var(--primary), var(--secondary));
      color: var(--text-light);
      position: sticky;
      top: 0;
      z-index: 10;
      font-weight: 600;
    }

    tbody tr:hover {
      background: #fff7ed;
      transform: scale(1.01);
    }

    .toast {
      position: fixed;
      top: 20px;
      right: 20px;
      background: var(--primary);
      color: var(--text-light);
      padding: 14px 28px;
      border-radius: 12px;
      box-shadow: var(--shadow);
      z-index: 2000;
      display: none;
      transition: opacity 0.3s ease;
    }

    .toast.show {
      display: block;
      opacity: 1;
    }

    .modal-content {
      max-height: 90vh;
      overflow-y: auto;
      border-radius: 16px;
      padding: 20px;
      width: 90%;
      max-width: 450px;
      background: var(--glass-bg);
    }

    .chat-container {
      background: #ffffff;
      border-radius: 16px;
      padding: 14px;
      box-shadow: var(--shadow);
      height: 450px;
      display: flex;
      flex-direction: column;
    }

    .chat-window {
      flex: 1;
      overflow-y: auto;
      padding: 14px;
      background: #f9fafb;
      border-radius: 12px;
      margin-bottom: 14px;
    }

    .profile-image {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      object-fit: cover;
      border: 2px solid var(--primary);
      transition: all 0.3s ease;
    }

    .profile-image:hover {
      transform: scale(1.1);
    }

    @media (max-width: 1023px) {
      .main-content {
        margin-bottom: 70px;
      }
      .table-container td:before {
        content: attr(data-label);
        font-weight: 600;
        width: 40%;
        min-width: 100px;
      }
      .bottom-nav {
        display: flex;
        position: fixed;
        bottom: 0;
        left: 0;
        right: 0;
        background: var(--glass-bg);
        backdrop-filter: blur(12px);
        box-shadow: var(--shadow);
        z-index: 2000;
        padding: 10px 0;
      }
      .bottom-nav .nav-item {
        flex: 1;
        text-align: center;
        color: var(--text-dark);
        font-size: 0.8rem;
        padding: 10px 0;
      }
      .bottom-nav .nav-item.active {
        color: var(--primary);
        background: rgba(255, 107, 0, 0.1);
      }
    }

    @media (min-width: 1024px) {
      .bottom-nav {
        display: none;
      }
    }
  </style>
</head>
<body>
  <div id="preloader" class="fixed inset-0 bg-gradient-to-r from-orange-600 to-orange-700 flex items-center justify-center z-[3000] transition-opacity duration-500">
    <div class="border-6 border-white border-t-orange-600 rounded-full w-12 h-12 animate-spin"></div>
    <div class="ml-4 text-white text-2xl font-bold animate-pulse">DELICUTE Admin</div>
  </div>

  <div id="adminDashboard" class="hidden">
    <header class="bg-gradient-to-r from-orange-600 to-orange-700 text-white p-4 sticky top-0 z-30 shadow-lg">
      <div class="container mx-auto flex justify-between items-center">
        <div class="flex items-center gap-4">
          <img src="https://imgur.com/ZbhzFqT.png" alt="DELICUTE Logo" class="h-10" loading="lazy" onerror="this.src='https://images.unsplash.com/photo-1624726170933-5cc6eab32e0e'">
          <div class="text-2xl font-bold">DELICUTE</div>
        </div>
        <div class="relative">
          <button id="profileToggle" class="text-white hover:text-orange-200 transition-colors" aria-label="Toggle profile menu">
            <img id="profileImage" src="https://images.unsplash.com/photo-1506794778202-6d6d8c4f7e0f" alt="Admin Profile" class="profile-image" onerror="this.src='https://images.unsplash.com/photo-1624726170933-5cc6eab32e0e'">
          </button>
          <div id="dropdownMenu" class="dropdown-menu">
            <button data-section="dashboard" class="admin-nav"><i class="fas fa-home"></i> Dashboard</button>
            <button data-section="orders" class="admin-nav"><i class="fas fa-shopping-cart"></i> Orders</button>
            <button data-section="customers" class="admin-nav"><i class="fas fa-users"></i> Customers</button>
            <button data-section="menu" class="admin-nav"><i class="fas fa-utensils"></i> Menu</button>
            <button data-section="support" class="admin-nav"><i class="fas fa-headset"></i> Support</button>
            <button data-section="promotions" class="admin-nav"><i class="fas fa-tag"></i> Promotions</button>
            <button data-section="feedback" class="admin-nav"><i class="fas fa-comment-alt"></i> Feedback</button>
            <button data-section="settings" class="admin-nav"><i class="fas fa-cog"></i> Settings</button>
            <button data-section="reports" class="admin-nav"><i class="fas fa-chart-bar"></i> Reports</button>
            <button id="logout" class="admin-nav text-red-600 hover:text-white"><i class="fas fa-sign-out-alt"></i> Logout</button>
          </div>
        </div>
      </div>
    </header>

    <div class="main-content p-6">
      <section id="admin-dashboard" class="admin-section animate-slideUp">
        <div class="flex justify-between items-center mb-6">
          <h2 class="text-3xl font-bold text-orange-600">Dashboard</h2>
          <div id="countdownTimer" class="text-lg font-semibold text-gray-700"></div>
        </div>
        <div class="glass p-8 mb-8">
          <h2 class="text-3xl font-bold mb-4">Manage Seamlessly!</h2>
          <p class="text-lg mb-6">Run your restaurant with our powerful admin tools.</p>
          <div class="flex gap-4">
            <button data-section="orders" class="admin-nav stunning-btn"><i class="fas fa-shopping-cart"></i> Orders</button>
            <button data-section="menu" class="admin-nav stunning-btn bg-white text-orange-600 hover:bg-gray-100"><i class="fas fa-utensils"></i> Menu</button>
          </div>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
          <div class="glass p-6" data-tilt data-tilt-max="8">
            <h3 class="text-lg font-semibold flex items-center gap-3"><i class="fas fa-shopping-cart text-orange-600"></i> Total Orders</h3>
            <p class="text-3xl text-orange-600 font-bold" id="totalOrders">0</p>
          </div>
          <div class="glass p-6" data-tilt data-tilt-max="8">
            <h3 class="text-lg font-semibold flex items-center gap-3"><i class="fas fa-rupee-sign text-orange-600"></i> Total Sales</h3>
            <p class="text-3xl text-orange-600 font-bold" id="totalSales">₹0</p>
          </div>
          <div class="glass p-6" data-tilt data-tilt-max="8">
            <h3 class="text-lg font-semibold flex items-center gap-3"><i class="fas fa-users text-orange-600"></i> Active Customers</h3>
            <p class="text-3xl text-orange-600 font-bold" id="activeCustomers">0</p>
          </div>
          <div class="glass p-6" data-tilt data-tilt-max="8">
            <h3 class="text-lg font-semibold flex items-center gap-3"><i class="fas fa-undo text-orange-600"></i> Pending Refunds</h3>
            <p class="text-3xl text-orange-600 font-bold" id="pendingRefunds">0</p>
          </div>
        </div>
        <h3 class="text-3xl font-bold mb-6">Recent Orders</h3>
        <div class="table-container glass">
          <table>
            <thead>
              <tr>
                <th>Order ID</th>
                <th>Customer</th>
                <th>Total</th>
                <th>Status</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="recentOrders"></tbody>
          </table>
          <div class="pagination" id="recentOrdersPagination"></div>
        </div>
        <div class="mt-8 glass p-8">
          <h3 class="text-3xl font-bold mb-6">Sales Overview</h3>
          <canvas id="salesChart"></canvas>
        </div>
      </section>

      <!-- Other sections (orders, customers, menu, support, promotions, feedback, settings, reports) remain similar but updated for backend integration -->
      <section id="admin-settings" class="admin-section hidden animate-slideUp">
        <div class="flex justify-between items-center mb-6">
          <h2 class="text-3xl font-bold text-orange-600">Settings</h2>
        </div>
        <div class="glass p-8 mb-8">
          <h3 class="text-3xl font-bold mb-6">Restaurant Status</h3>
          <div class="space-y-6">
            <div>
              <label for="restaurantStatus" class="block font-medium mb-2">Status</label>
              <select id="restaurantStatus" class="w-full px-4 py-3 rounded-lg border focus:ring-2 focus:ring-orange-600">
                <option value="open">Open</option>
                <option value="closed">Closed</option>
              </select>
            </div>
            <div>
              <label for="openTime" class="block font-medium mb-2">Open Time</label>
              <input type="time" id="openTime" class="w-full px-4 py-3 rounded-lg border focus:ring-2 focus:ring-orange-600">
            </div>
            <div>
              <label for="closeTime" class="block font-medium mb-2">Close Time</label>
              <input type="time" id="closeTime" class="w-full px-4 py-3 rounded-lg border focus:ring-2 focus:ring-orange-600">
            </div>
            <button id="saveRestaurantStatus" class="stunning-btn"><i class="fas fa-save"></i> Save</button>
          </div>
        </div>
        <div class="glass p-8">
          <h3 class="text-3xl font-bold mb-6">Loyalty Points</h3>
          <div class="space-y-6">
            <div>
              <label for="loyaltyUser" class="block font-medium mb-2">Select User</label>
              <select id="loyaltyUser" class="w-full px-4 py-3 rounded-lg border focus:ring-2 focus:ring-orange-600"></select>
            </div>
            <div>
              <label for="loyaltyPoints" class="block font-medium mb-2">Points</label>
              <input type="number" id="loyaltyPoints" class="w-full px-4 py-3 rounded-lg border focus:ring-2 focus:ring-orange-600">
            </div>
            <button id="assignLoyaltyPoints" class="stunning-btn"><i class="fas fa-gift"></i> Assign Points</button>
          </div>
        </div>
      </section>
    </div>

    <div class="bottom-nav">
      <div class="nav-item admin-nav" data-section="dashboard"><i class="fas fa-tachometer-alt"></i><div>Dashboard</div></div>
      <div class="nav-item admin-nav" data-section="orders"><i class="fas fa-shopping-cart"></i><div>Orders</div></div>
      <div class="nav-item admin-nav" data-section="menu"><i class="fas fa-utensils"></i><div>Menu</div></div>
      <div class="nav-item admin-nav" data-section="support"><i class="fas fa-headset"></i><div>Support</div></div>
      <div class="nav-item admin-nav" data-section="settings"><i class="fas fa-cog"></i><div>Settings</div></div>
    </div>

    <div id="toast" class="toast" role="alert" aria-live="assertive"></div>
  </div>

  <script>
    const CONFIG = {
      API_URL: 'http://localhost:3000/api',
      ITEMS_PER_PAGE: 8,
      SOCKET_URL: 'http://localhost:3000',
    };

    const state = {
      currentPage: {
        orders: 1,
        customers: 1,
        menu: 1,
        promotions: 1,
        feedback: 1,
      },
      charts: {},
      isDropdownOpen: false,
      socket: io(CONFIG.SOCKET_URL),
    };

    // Utility Functions
    function showToast(message, type = 'info') {
      const toast = document.getElementById('toast');
      toast.textContent = message;
      toast.className = `toast ${type === 'error' ? 'error' : type === 'success' ? 'success' : ''} show`;
      setTimeout(() => toast.classList.remove('show'), 3000);
    }

    function triggerConfetti() {
      confetti({ particleCount: 100, spread: 70, origin: { y: 0.6 }, colors: ['#ff6b00', '#ff8f33', '#34d399'] });
    }

    function sanitizeInput(input) {
      const div = document.createElement('div');
      div.textContent = input;
      return div.innerHTML;
    }

    function paginate(data, page, itemsPerPage) {
      const start = (page - 1) * itemsPerPage;
      return data.slice(start, start + itemsPerPage);
    }

    function renderPagination(containerId, totalItems, currentPage, onPageChange) {
      const totalPages = Math.ceil(totalItems / CONFIG.ITEMS_PER_PAGE);
      const container = document.getElementById(containerId);
      container.innerHTML = '';
      const prevButton = document.createElement('button');
      prevButton.innerHTML = '<i class="fas fa-chevron-left"></i> Prev';
      prevButton.disabled = currentPage === 1;
      prevButton.addEventListener('click', () => onPageChange(currentPage - 1));
      container.appendChild(prevButton);
      for (let i = 1; i <= totalPages; i++) {
        const pageButton = document.createElement('button');
        pageButton.textContent = i;
        pageButton.disabled = i === currentPage;
        pageButton.addEventListener('click', () => onPageChange(i));
        container.appendChild(pageButton);
      }
      const nextButton = document.createElement('button');
      nextButton.innerHTML = 'Next <i class="fas fa-chevron-right"></i>';
      nextButton.disabled = currentPage === totalPages;
      nextButton.addEventListener('click', () => onPageChange(currentPage + 1));
      container.appendChild(nextButton);
    }

    // API Client
    const api = {
      async fetchData(endpoint, method = 'GET', data = null) {
        try {
          const headers = {
            'Content-Type': 'application/json',
            'Authorization': `Bearer ${localStorage.getItem('jwtToken')}`,
          };
          const options = { method, headers };
          if (data) options.body = JSON.stringify(data);
          const response = await fetch(`${CONFIG.API_URL}${endpoint}`, options);
          if (!response.ok) throw new Error('Network error');
          return await response.json();
        } catch (err) {
          showToast(`Error: ${err.message}`, 'error');
          return null;
        }
      },
      async uploadImage(endpoint, formData) {
        try {
          const response = await fetch(`${CONFIG.API_URL}${endpoint}`, {
            method: 'POST',
            headers: { 'Authorization': `Bearer ${localStorage.getItem('jwtToken')}` },
            body: formData,
          });
          if (!response.ok) throw new Error('Image upload failed');
          return await response.json();
        } catch (err) {
          showToast(`Error: ${err.message}`, 'error');
          return null;
        }
      },
    };

    // Section Loaders
    async function loadDashboard() {
      const [orders, customers] = await Promise.all([
        api.fetchData('/orders'),
        api.fetchData('/users'),
      ]);

      document.getElementById('totalOrders').textContent = orders.length;
      document.getElementById('totalSales').textContent = `₹${orders.reduce((sum, o) => sum + (o.total || 0), 0).toLocaleString()}`;
      document.getElementById('activeCustomers').textContent = customers.length;
      document.getElementById('pendingRefunds').textContent = orders.filter(o => o.status === 'cancelled').length;

      const paginatedOrders = paginate(orders, state.currentPage.orders, CONFIG.ITEMS_PER_PAGE);
      document.getElementById('recentOrders').innerHTML = paginatedOrders.map(order => {
        const customer = customers.find(c => c._id === order.userId) || { name: 'Unknown' };
        return `
          <tr>
            <td data-label="Order ID">#${order._id}</td>
            <td data-label="Customer">${sanitizeInput(customer.name)}</td>
            <td data-label="Total">₹${order.total || 0}</td>
            <td data-label="Status">${sanitizeInput(order.status)}</td>
            <td data-label="Actions">
              <button class="stunning-btn text-sm px-3 py-1" data-action="view" data-id="${order._id}" aria-label="View order ${order._id}">
                <i class="fas fa-eye"></i> View
              </button>
            </td>
          </tr>
        `;
      }).join('');

      renderPagination('recentOrdersPagination', orders.length, state.currentPage.orders, (page) => {
        state.currentPage.orders = page;
        loadDashboard();
      });

      const dates = [...new Set(orders.map(o => new Date(o.createdAt).toISOString().split('T')[0]))].sort();
      const salesData = dates.map(date => orders.filter(o => new Date(o.createdAt).toISOString().split('T')[0] === date).reduce((sum, o) => sum + (o.total || 0), 0));
      const ctx = document.getElementById('salesChart').getContext('2d');
      if (state.charts.salesChart) state.charts.salesChart.destroy();
      state.charts.salesChart = new Chart(ctx, {
        type: 'line',
        data: {
          labels: dates.length ? dates : ['No Data'],
          datasets: [{
            label: 'Sales (₹)',
            data: salesData.length ? salesData : [0],
            borderColor: '#ff6b00',
            backgroundColor: 'rgba(255, 107, 0, 0.2)',
            fill: true,
            tension: 0.4,
          }],
        },
        options: { responsive: true, scales: { y: { beginAtZero: true } } },
      });
    }

    async function loadSettings() {
      const [profile, restaurantStatus, users] = await Promise.all([
        api.fetchData('/profile'),
        api.fetchData('/restaurant/status'),
        api.fetchData('/users'),
      ]);

      document.getElementById('profileImage').src = profile.image || 'https://images.unsplash.com/photo-1624726170933-5cc6eab32e0e';
      document.getElementById('restaurantStatus').value = restaurantStatus.status;
      document.getElementById('openTime').value = restaurantStatus.openTime;
      document.getElementById('closeTime').value = restaurantStatus.closeTime;

      const loyaltyUserSelect = document.getElementById('loyaltyUser');
      loyaltyUserSelect.innerHTML = '<option value="">Select a user</option>' + users.map(u => `<option value="${u._id}">${sanitizeInput(u.name)}</option>`).join('');
    }

    // Navigation
    function switchSection(sectionId) {
      document.querySelectorAll('.admin-section').forEach(s => s.classList.add('hidden'));
      document.getElementById(`admin-${sectionId}`).classList.remove('hidden');
      document.querySelectorAll('.admin-nav').forEach(btn => btn.classList.remove('active'));
      document.querySelectorAll(`.admin-nav[data-section="${sectionId}"]`).forEach(btn => btn.classList.add('active'));
      state.currentPage[sectionId] = 1;
      state.isDropdownOpen = false;
      document.getElementById('dropdownMenu').classList.remove('show');

      if (sectionId === 'dashboard') loadDashboard();
      if (sectionId === 'settings') loadSettings();
      // Add other section loaders as needed
    }

    // Event Listeners
    document.addEventListener('DOMContentLoaded', () => {
      setTimeout(() => {
        document.getElementById('preloader').style.opacity = '0';
        setTimeout(() => {
          document.getElementById('preloader').style.display = 'none';
          document.getElementById('adminDashboard').classList.remove('hidden');
          triggerConfetti();
        }, 500);
      }, 2000);

      document.getElementById('profileToggle').addEventListener('click', () => {
        state.isDropdownOpen = !state.isDropdownOpen;
        document.getElementById('dropdownMenu').classList.toggle('show', state.isDropdownOpen);
      });

      document.querySelectorAll('.admin-nav').forEach(button => {
        button.addEventListener('click', () => {
          const section = button.getAttribute('data-section');
          if (section) switchSection(section);
        });
      });

      document.getElementById('logout').addEventListener('click', () => {
        localStorage.removeItem('jwtToken');
        showToast('Logged out successfully', 'success');
        setTimeout(() => {
          window.location.href = 'index.html';
        }, 1000);
      });

      document.getElementById('saveRestaurantStatus').addEventListener('click', async () => {
        const data = {
          status: document.getElementById('restaurantStatus').value,
          openTime: document.getElementById('openTime').value,
          closeTime: document.getElementById('closeTime').value,
        };
        const result = await api.fetchData('/restaurant/status', 'PUT', data);
        if (result) {
          showToast('Restaurant status updated', 'success');
          state.socket.emit('statusUpdate', data);
        }
      });

      document.getElementById('assignLoyaltyPoints').addEventListener('click', async () => {
        const userId = document.getElementById('loyaltyUser').value;
        const points = parseInt(document.getElementById('loyaltyPoints').value);
        if (!userId || !points) {
          showToast('Please select a user and enter points', 'error');
          return;
        }
        const result = await api.fetchData(`/users/${userId}/loyalty`, 'PUT', { points });
        if (result) {
          showToast('Loyalty points assigned', 'success');
        }
      });

      function updateCountdown() {
        const now = new Date();
        const midnight = new Date(now);
        midnight.setHours(24, 0, 0, 0);
        const timeLeft = midnight - now;
        const hours = Math.floor(timeLeft / 1000 / 60 / 60);
        const minutes = Math.floor((timeLeft / 1000 / 60) % 60);
        const seconds = Math.floor((timeLeft / 1000) % 60);
        document.getElementById('countdownTimer').textContent = `Daily Reset: ${hours}h ${minutes}m ${seconds}s`;
      }
      setInterval(updateCountdown, 1000);
      updateCountdown();

      VanillaTilt.init(document.querySelectorAll('[data-tilt]'), {
        max: 8,
        speed: 400,
        glare: true,
        'max-glare': 0.2,
      });

      loadDashboard();
    });
  </script>
</body>
</html>